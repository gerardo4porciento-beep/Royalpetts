<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self';
        script-src 'self' 'unsafe-eval' 'unsafe-inline' https://cdn.jsdelivr.net https://www.gstatic.com;
        style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;
        font-src 'self' https://fonts.gstatic.com;
        img-src 'self' data: https:;
        connect-src 'self' https://*.firebaseio.com https://*.googleapis.com https://*.firebaseapp.com wss://*.firebaseio.com;
        frame-src 'self' https://*.firebaseapp.com;
    ">
    <title>Panel Administrativo - ROYALPETTS STORE</title>
    <link rel="stylesheet" href="admin.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Skater+Girls+Rock&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics-compat.js"></script>
    <script src="firebase-config.js"></script>
    <script>
        // Verificar que los scripts se cargaron
        window.addEventListener('load', function () {
            console.log('P√°gina completamente cargada');
            console.log('Firebase disponible:', typeof firebase !== 'undefined');
            console.log('initFirebase disponible:', typeof initFirebase !== 'undefined');
        });
    </script>
</head>

<body>
    <!-- Login Panel -->
    <div id="loginPanel" class="login-panel">
        <div class="login-container">
            <div class="login-box">
                <div class="login-logo">
                    <img src="../SEPARACION 6/LOGO 1.png" alt="Logo" class="logo-img-login">
                </div>
                <h1 class="login-title">ROYALPETTS</h1>
                <h2 class="login-subtitle">Panel Administrativo</h2>
                <form id="loginForm" class="login-form">
                    <div class="form-group">
                        <label for="username">Usuario</label>
                        <input type="text" id="username" name="username" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Contrase√±a</label>
                        <input type="password" id="password" name="password" required>
                    </div>
                    <button type="submit" class="btn-login">Iniciar Sesi√≥n</button>
                </form>
                <p class="login-hint">Usuario: admin | Contrase√±a: admin123</p>
            </div>
        </div>
    </div>

    <!-- Dashboard -->
    <div id="dashboard" class="dashboard hidden">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="header-content">
                <h1 class="dashboard-title">ROYALPETTS - Panel Administrativo</h1>
                <button id="logoutBtn" class="btn-logout">Cerrar Sesi√≥n</button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="dashboard-main">
            <!-- Stats Cards -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üêï</div>
                    <div class="stat-info">
                        <h3 class="stat-value" id="totalVendidos">0</h3>
                        <p class="stat-label">Cachorros Vendidos</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üí∞</div>
                    <div class="stat-info">
                        <h3 class="stat-value" id="totalVentas">$0</h3>
                        <p class="stat-label">Total Ventas</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üí∏</div>
                    <div class="stat-info">
                        <h3 class="stat-value" id="totalGastos">$0</h3>
                        <p class="stat-label">Total Gastos</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üìä</div>
                    <div class="stat-info">
                        <h3 class="stat-value" id="gananciaNeta">$0</h3>
                        <p class="stat-label">Ganancia Neta</p>
                    </div>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="charts-grid">
                <div class="chart-card">
                    <h3 class="chart-title">Ventas por Mes</h3>
                    <canvas id="ventasMesChart"></canvas>
                </div>
                <div class="chart-card">
                    <h3 class="chart-title">Ventas por Raza</h3>
                    <canvas id="ventasRazaChart"></canvas>
                </div>
            </div>

            <!-- Actions Section -->
            <div class="actions-section">
                <button id="btnCargarVenta" class="btn-action">‚ûï Cargar Venta</button>
                <button id="btnCargarGasto" class="btn-action">‚ûñ Cargar Gasto</button>
            </div>

            <!-- Data Table -->
            <div class="table-section">
                <div class="table-header">
                    <h2 class="table-title">Registro de Datos</h2>
                    <div class="table-filters">
                        <select id="filterType" class="filter-select">
                            <option value="all">Todos</option>
                            <option value="venta">Ventas</option>
                            <option value="gasto">Gastos</option>
                        </select>
                        <input type="text" id="searchInput" class="search-input" placeholder="Buscar...">
                    </div>
                </div>
                <div class="table-container">
                    <table id="dataTable" class="data-table">
                        <thead>
                            <tr>
                                <th>Fecha</th>
                                <th>Tipo</th>
                                <th>Descripci√≥n</th>
                                <th>Raza</th>
                                <th>Cantidad</th>
                                <th>Precio Unitario</th>
                                <th>Total</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="tableBody">
                            <!-- Data will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal para Cargar Venta -->
    <div id="ventaModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Cargar Nueva Venta</h2>
                <button class="modal-close" data-modal="ventaModal">&times;</button>
            </div>
            <form id="ventaForm" class="modal-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="ventaFecha">Fecha</label>
                        <input type="date" id="ventaFecha" name="fecha" required>
                    </div>
                    <div class="form-group">
                        <label for="ventaRaza">Raza</label>
                        <input type="text" id="ventaRaza" name="raza" list="razas-lista"
                            placeholder="Escribe o selecciona..." required>
                        <datalist id="razas-lista">
                            <option value="Golden Retriever">
                            <option value="Bulldog Franc√©s">
                            <option value="Poodle (Caniche)">
                            <option value="Husky Siberiano">
                            <option value="Pastor Alem√°n">
                            <option value="Yorkshire Terrier">
                            <option value="Beagle">
                            <option value="Rottweiler">
                            <option value="Chihuahua">
                            <option value="Shih Tzu">
                            <option value="Pug (Carlino)">
                            <option value="Schnauzer">
                            <option value="Boxer">
                            <option value="Doberman">
                            <option value="Cocker Spaniel">
                            <option value="Bich√≥n Malt√©s">
                            <option value="Pomerania">
                            <option value="Labrador Retriever">
                            <option value="Jack Russell">
                            <option value="Border Collie">
                        </datalist>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="ventaEstado">Estado de Venta</label>
                        <select id="ventaEstado" name="estado" required>
                            <option value="">Seleccionar Estado...</option>
                            <option value="Amazonas">Amazonas</option>
                            <option value="Anzo√°tegui">Anzo√°tegui</option>
                            <option value="Apure">Apure</option>
                            <option value="Aragua">Aragua</option>
                            <option value="Barinas">Barinas</option>
                            <option value="Bol√≠var">Bol√≠var</option>
                            <option value="Carabobo">Carabobo</option>
                            <option value="Cojedes">Cojedes</option>
                            <option value="Delta Amacuro">Delta Amacuro</option>
                            <option value="Distrito Capital">Distrito Capital</option>
                            <option value="Falc√≥n">Falc√≥n</option>
                            <option value="Gu√°rico">Gu√°rico</option>
                            <option value="La Guaira">La Guaira</option>
                            <option value="Lara">Lara</option>
                            <option value="M√©rida">M√©rida</option>
                            <option value="Miranda">Miranda</option>
                            <option value="Monagas">Monagas</option>
                            <option value="Nueva Esparta">Nueva Esparta</option>
                            <option value="Portuguesa">Portuguesa</option>
                            <option value="Sucre">Sucre</option>
                            <option value="T√°chira">T√°chira</option>
                            <option value="Trujillo">Trujillo</option>
                            <option value="Yaracuy">Yaracuy</option>
                            <option value="Zulia">Zulia</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="ventaCantidad">Cantidad</label>
                        <input type="number" id="ventaCantidad" name="cantidad" min="1" value="1" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="ventaPrecio">Precio ($)</label>
                        <input type="number" id="ventaPrecio" name="precio" step="0.01" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="ventaCosto">Costo ($)</label>
                        <input type="number" id="ventaCosto" name="costo" step="0.01" min="0" placeholder="0.00">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="ventaCompartida">¬øVenta Compartida?</label>
                        <select id="ventaCompartida" name="compartida" required>
                            <option value="no">No</option>
                            <option value="si">S√≠ (50%)</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="ventaDescripcion">Descripci√≥n</label>
                    <textarea id="ventaDescripcion" name="descripcion" rows="3"
                        placeholder="Descripci√≥n adicional..."></textarea>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-cancel" data-modal="ventaModal">Cancelar</button>
                    <button type="submit" class="btn-save">Guardar Venta</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para Cargar Gasto -->
    <div id="gastoModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Cargar Nuevo Gasto</h2>
                <button class="modal-close" data-modal="gastoModal">&times;</button>
            </div>
            <form id="gastoForm" class="modal-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="gastoFecha">Fecha</label>
                        <input type="date" id="gastoFecha" name="fecha" required>
                    </div>
                    <div class="form-group">
                        <label for="gastoCategoria">Categor√≠a</label>
                        <select id="gastoCategoria" name="categoria" required>
                            <option value="">Seleccionar...</option>
                            <option value="Alimentos">Alimentos</option>
                            <option value="Veterinaria">Veterinaria</option>
                            <option value="Suministros">Suministros</option>
                            <option value="Personal">Personal</option>
                            <option value="Otros">Otros</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="gastoMonto">Monto ($)</label>
                        <input type="number" id="gastoMonto" name="monto" step="0.01" min="0" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="gastoDescripcion">Descripci√≥n</label>
                    <textarea id="gastoDescripcion" name="descripcion" rows="3" placeholder="Descripci√≥n del gasto..."
                        required></textarea>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-cancel" data-modal="gastoModal">Cancelar</button>
                    <button type="submit" class="btn-save">Guardar Gasto</button>
                </div>
            </form>
        </div>
    </div>

    <script src="admin.js"></script>
</body>

</html>